@page "/catalog"
@using Shared.Dto
@inject ProductsService _productsService
@inject NavigationManager _navManager

<PageTitle>Catalog</PageTitle>

<HxButton Text="Add product" OnClick="@OpenNewProduct" Color="ThemeColor.Primary" />

<HxGrid TItem="ProductDto" Responsive="true" DataProvider="GetGridData" PageSize="25">
    <Columns>
        <HxGridColumn TItem="ProductDto" HeaderText="Name" ItemTextSelector="@(i => i.Name)" SortKeySelector="@(i => i.Name)" IsDefaultSortColumn="true" />
        <HxGridColumn TItem="ProductDto" HeaderText="Supplier" ItemTextSelector="@(i => i.Supplier?.Name ?? "")"  SortKeySelector="@(i => i.Supplier.Name)"/>
        <HxContextMenuGridColumn TItem="ProductDto" Context="item">
            <HxContextMenu>
                <HxContextMenuItem Text="Open" Icon="BootstrapIcon.TextCenter" OnClick="() => OpenProduct(item)" />
                <HxContextMenuItem Text="Delete" Icon="BootstrapIcon.Trash" OnClick="() => DeleteProduct(item)" />
            </HxContextMenu>
        </HxContextMenuGridColumn>
    </Columns>
</HxGrid>